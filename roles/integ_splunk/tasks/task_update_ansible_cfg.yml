---
# Tasks to update ansible.cfg file
- block:
  - name: remove log file definition from {{ spl_ansible_path }}/ansible.cfg
    lineinfile:
      path: "{{ spl_ansible_path }}/ansible.cfg"
      regex: '^log_path ='
      state: absent
  - name: remove allow_world_readable_tmpfiles parameter from {{ spl_ansible_path }}/ansible.cfg
    ansible.builtin.replace:
      path: "{{ spl_ansible_path }}/ansible.cfg"
      regexp: '^(allow_world_readable_tmpfiles = .*)$'
      replace: '#\g<1>'
  - name: disable deprecation warnings in {{ spl_ansible_path }}/ansible.cfg
    lineinfile:
      path: "{{ spl_ansible_path }}/ansible.cfg"
      line: 'deprecation_warnings = False'
      insertbefore: 'command_warnings'
  delegate_to: localhost
  run_once: true
  tags: integ_splunk
