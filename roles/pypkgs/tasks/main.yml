---
# tasks file for pypkgs
- block:
  - name: Get proxy address
    include_tasks: task_get_proxy_address.yml
  - name: Install python package
    include_tasks:
      file:
        task_install_pypkg.yml
      apply:
        vars:
          pypkg: "{{ pkg_item }}"
          proxyaddress: "{{ proxy_address|default('') }}"
    loop: "{{ pypkg_list }}"
    loop_control:
      loop_var: pkg_item
      label: "{{ pkg_item }}"
    when: pkg_item != ''
  check_mode: no
  tags: [ 'always', 'pypkgs' ]
