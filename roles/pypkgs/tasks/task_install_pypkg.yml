---
# Tasks to install Python Package
- block:
  - name: Install Package {{ pypkg }}
    pip:
      name: "{{ pypkg }}"
      state:  'present'
      extra_args: --user
    check_mode: yes
    become: true
    when: auto_dir is search('cdra')
  - name: Install Package {{ pypkg }}
    pip:
      name: "{{ pypkg }}"
      state: 'latest'
      extra_args: --user
    when: auto_dir is not search('cdra')
    environment:
      http_proxy: "{{ proxyaddress }}"
  tags: [ 'always', 'pypkgs' ]
