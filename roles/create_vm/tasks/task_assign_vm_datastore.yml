---
# tasks to assign vm datastore
- name: define vm_seq for each host
  set_fact:
    vm_seq: "{{range(0, groups[stack_group]|length, 2)|list}}"
  tags: create_vm

- include_tasks:
    file: task_get_datastore_facts.yml
    apply:
      vars:
        - vm_type: "{{stack_group}}"
        - pair_num: "{{seq_item}}"
  loop: "{{vm_seq}}"
  loop_control:
    loop_var: seq_item
  tags: create_vm
