---
# tasks file for capcheck
- block:
  - include_tasks: task_get_required_space.yml

  - block:
    - include_tasks: task_get_cluster_name.yml
      when:
        - information.cluster is not defined or information.cluster == ''

    - include_tasks: task_get_datastore_facts.yml
    when:
      - information.deptype == 'h'

  - include_tasks: task_get_host_facts.yml
    when:
      - information.deptype == 'a'

  when: capcheck | default(false) | bool
  tags: ['capcheck', 'vm_creation']

