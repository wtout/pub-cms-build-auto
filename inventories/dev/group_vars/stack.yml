---
# Variables for stack hosts
ssh_username: "{{bastion.username if bastion is defined else ''}}"
ssh_address: "{{bastion.address if bastion is defined else ''}}"
ssh_var: '-o ProxyCommand="ssh -W %h:%p -q {{ssh_username}}@{{ssh_address}}"'
ansible_ssh_common_args: "{{ssh_var if groups['bastion'] | length >= 1 else ''}}"

stack:
  address: "{{ansible_host}}"
  username: "root"
  password: "root"