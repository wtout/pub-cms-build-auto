---
# Variables for vcenter
ssh_username: "{{hostvars[groups['bastion'][0]]['ansible_user'] if (groups['bastion'][0] is defined and bastion.address != []) else ''}}"
ssh_address: "{{hostvars[groups['bastion'][0]]['ansible_host'] if (groups['bastion'][0] is defined and bastion.address != []) else ''}}"
ssh_var: '-o ProxyCommand="ssh -W %h:%p -q {{ssh_username}}@{{ssh_address}}"'
ansible_ssh_common_args: "{{ssh_var if (groups['bastion'] | length >= 1 and bastion.address != []) else ''}}"

credentials:
  username: "{{VCENTER_USER | default('')}}"
  password: "{{VCENTER_PASS | default('')}}"

information:
  address: "{{datacenters[datacenter.name]['vsphere']}}"
  datacenter: "{{datacenter.name}}"
  deptype: "{{datacenters[datacenter.name]['deptype']}}"
  resources: "{{datacenter.resources if (datacenter.resources != [] and datacenter.resources != ['']) else datacenters[datacenter.name]['resources'] if datacenters[datacenter.name]['resources'] is defined else ''}}"
  cluster: "{{datacenters[datacenter.name]['cluster'] if datacenters[datacenter.name]['cluster'] is defined else 'CMSP - '+ customer.name_prefix if datacenters[datacenter.name]['deptype'] == 'a' else ''}}"
  folder: "{{datacenters[datacenter.name]['folder'] if datacenters[datacenter.name]['folder'] is defined else ''}}"
